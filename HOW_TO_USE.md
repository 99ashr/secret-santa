#!/bin/bash

# ğŸ„ Secret Santa Django App - Complete Setup & Launch Guide

echo "â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—"
echo "â•‘ â•‘"
echo "â•‘ ğŸ„ SECRET SANTA - HOW TO USE IT ğŸ„ â•‘"
echo "â•‘ â•‘"
echo "â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo ""

# Get the current working directory

WORKSPACE_DIR="$( cd "$( dirname "${BASH_SOURCE[0]}" )" && pwd )"

echo "ğŸ“ Project Location: $WORKSPACE_DIR"
echo ""

# Step 1: Activate Virtual Environment

echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo "Step 1ï¸âƒ£ ACTIVATE VIRTUAL ENVIRONMENT"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo ""
echo "Run this command:"
echo ""
echo " source venv/bin/activate"
echo ""
echo "After running this, your prompt should show '(venv)' at the start"
echo ""

# Step 2: Create Superuser

echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo "Step 2ï¸âƒ£ CREATE ADMIN ACCOUNT (First Time Only)"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo ""
echo "Run this command:"
echo ""
echo " python manage.py createsuperuser"
echo ""
echo "Follow the prompts to create your admin account (username, email, password)"
echo ""
echo "ğŸ’¡ Tip: Use simple credentials for local testing:"
echo " Username: admin"
echo " Email: admin@example.com"
echo " Password: admin123"
echo ""

# Step 3: Start Django Development Server

echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo "Step 3ï¸âƒ£ START THE SERVER"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo ""
echo "Run this command:"
echo ""
echo " python manage.py runserver"
echo ""
echo "You'll see output like:"
echo " Starting development server at http://127.0.0.1:8000/"
echo ""

# Step 4: Open in Browser

echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo "Step 4ï¸âƒ£ OPEN IN WEB BROWSER"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo ""
echo "Open these URLs in your browser:"
echo ""
echo "ğŸ  Admin Dashboard:"
echo " http://127.0.0.1:8000/"
echo ""
echo "ğŸ‘¥ Participant Reveal Page:"
echo " http://127.0.0.1:8000/participant/"
echo ""
echo "ğŸ” Django Admin Interface:"
echo " http://127.0.0.1:8000/admin/"
echo ""
echo " (Use your superuser credentials from Step 2)"
echo ""

# Using the App

echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo "ğŸ® HOW TO USE THE APP"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo ""

echo "1ï¸âƒ£ ADMIN DASHBOARD (http://127.0.0.1:8000/)"
echo " â”œâ”€ Generate Draw"
echo " â”‚ â””â”€ Creates a Secret Santa draw (no self-assignments)"
echo " â”‚ â””â”€ Generates random 6-character tokens for each person"
echo " â”‚"
echo " â”œâ”€ Show Tokens"
echo " â”‚ â””â”€ Displays table of all tokens with giver names"
echo " â”‚ â””â”€ Safe to share - doesn't reveal recipients"
echo " â”‚"
echo " â”œâ”€ Print Tokens"
echo " â”‚ â””â”€ Opens print dialog to print tokens for distribution"
echo " â”‚ â””â”€ Print as paper slips and hand out to participants"
echo " â”‚"
echo " â””â”€ Clear Draw"
echo " â””â”€ Deletes all tokens (for starting fresh next year)"
echo ""

echo "2ï¸âƒ£ PARTICIPANT PAGE (http://127.0.0.1:8000/participant/)"
echo " â”œâ”€ Enter your 6-character token"
echo " â”œâ”€ Click the gift box to unwrap"
echo " â”œâ”€ See your Secret Santa recipient name"
echo " â”œâ”€ Enjoy the confetti celebration! ğŸ‰"
echo " â””â”€ Share the link for others to reveal their recipients"
echo ""

echo "3ï¸âƒ£ DJANGO ADMIN (http://127.0.0.1:8000/admin/)"
echo " â”œâ”€ View all participants"
echo " â”œâ”€ View all draw mappings"
echo " â”œâ”€ Export data for records"
echo " â””â”€ Manage participants for future years"
echo ""

# Quick Reference

echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo "âš¡ QUICK REFERENCE - COPY/PASTE COMMANDS"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo ""
echo "# Activate environment"
echo "source venv/bin/activate"
echo ""
echo "# Create admin account (first time only)"
echo "python manage.py createsuperuser"
echo ""
echo "# Start the server"
echo "python manage.py runserver"
echo ""
echo "# View database in Django admin"
echo "# Then open http://127.0.0.1:8000/admin/"
echo ""

# Features

echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo "âœ¨ FEATURES"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo ""
echo "âœ… Automatic derangement (no one gets themselves)"
echo "âœ… Secure token generation (6-character alphanumeric)"
echo "âœ… Beautiful UI with animations"
echo "âœ… Gift box unwrap animation"
echo "âœ… Snowfall background effect"
echo "âœ… Confetti celebration on reveal"
echo "âœ… Mobile responsive design"
echo "âœ… Print-friendly tokens"
echo "âœ… Server-side validation"
echo "âœ… 34 participants pre-loaded"
echo ""

# Troubleshooting

echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo "ğŸ”§ TROUBLESHOOTING"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo ""
echo "âŒ 'django-admin: command not found'"
echo " â†’ Make sure to run: source venv/bin/activate"
echo ""
echo "âŒ 'Port 8000 already in use'"
echo " â†’ Use: python manage.py runserver 8001"
echo ""
echo "âŒ 'Database locked'"
echo " â†’ Delete db.sqlite3 and run: python manage.py migrate"
echo ""
echo "âŒ 'No participants found'"
echo " â†’ Run: python manage.py populate_participants"
echo ""
echo "âŒ 'Cannot generate draw'"
echo " â†’ Make sure participants exist (check Django admin)"
echo " â†’ If not, run populate_participants command above"
echo ""

# Next Steps

echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo "ğŸš€ NEXT STEPS"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo ""
echo "Ready to go! Follow these steps:"
echo ""
echo "1. Activate virtual environment:"
echo " â†’ source venv/bin/activate"
echo ""
echo "2. Create superuser (first time only):"
echo " â†’ python manage.py createsuperuser"
echo ""
echo "3. Start the server:"
echo " â†’ python manage.py runserver"
echo ""
echo "4. Open http://127.0.0.1:8000/ in your browser"
echo ""
echo "5. Generate a draw and share tokens with participants!"
echo ""

echo "ğŸ„ Enjoy your Secret Santa app! ğŸ„"
echo ""
